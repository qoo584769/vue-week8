{"version":3,"sources":["webpack:///./src/components/dashboard/admin-order-list.vue?8bca","webpack:///./src/components/dashboard/admin-order-list.vue","webpack:///./src/components/dashboard/admin-order-list.vue?59a5"],"names":["class","ref","id","for","type","AdminDelAllOrder","AdminOrderList","data","item","total","is_paid","ModalOpen","AdminDelSingleOrder","PageData","AdminPagination","AdminGetOrderList","data-bs-dismiss","aria-label","ModalClose","TempOrder","BtnSubmit","components","pagenation","setup","ModalDOM","value","classList","add","remove","page","a","get","then","res","success","orders","pagination","alert","message","catch","err","AdminUpdateProduct","Boolean","put","delete","render","__scopeId"],"mappings":"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","file":"js/chunk-0fd72906.2dbabb05.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./admin-order-list.vue?vue&type=style&index=0&id=4afcfe7f&lang=scss&scoped=true\"","<template>\n  <div class=\"container m-auto position-relative\">\n\n    <button type=\"button\" class=\"btn btn-danger\" @click.prevent=\"AdminDelAllOrder\">\n      刪除全部訂單\n    </button>\n\n    <table class=\"table\">\n      <thead>\n        <th>訂單ID</th>\n        <th>總價</th>\n        <th>訂單商品</th>\n        <th>收件者資料</th>\n        <th>是否付款</th>\n        <th>編輯</th>\n        <th>刪除</th>\n      </thead>\n      <tbody>\n        <template v-for=\"item in AdminOrderList.data\" :key=\"item.id\">\n          <tr class=\"\">\n            <td>{{item.id}}</td>\n            <td>{{item.total}}</td>\n            <td><button class=\"btn btn-secondary\">還在想如何呈現</button></td>\n            <td><button class=\"btn btn-secondary\">還在想如何呈現</button></td>\n            <td>{{item.is_paid?'已付款':'未付款'}}</td>\n            <td><button type=\"button\" class=\"btn btn-primary\"\n                @click.prevent=\"ModalOpen(item)\">編輯</button>\n            </td>\n            <td><button type=\"button\" class=\"btn btn-danger\"\n                @click.prevent=\"AdminDelSingleOrder(item.id)\">刪除</button>\n            </td>\n          </tr>\n        </template>\n      </tbody>\n    </table>\n\n    <pagenation :PageData=\"AdminPagination\" @out_getdata=\"AdminGetOrderList\"></pagenation>\n  </div>\n\n  <!-- Modal -->\n  <div class=\"modal-bg modal-close\" ref=\"ModalDOM\">\n    <div class=\"container mt-5 m-auto bg-white\">\n      <div class=\"p-4\">\n        <div class=\"d-flex\">\n          <h5 class=\"flex-grow-1\" id=\"exampleModalLabel\">訂單編輯</h5>\n          <button type=\"button\" class=\"btn-close \" data-bs-dismiss=\"modal\" aria-label=\"Close\"\n            @click.prevent=\"ModalClose\"></button>\n        </div>\n        <div class=\"\">\n\n          <label for=\"total\" class=\"form-label\">訂單金額</label>\n          <input type=\"text\" id=\"total\" class=\"form-control\" v-model.number=\"TempOrder.data.total\">\n\n          <label for=\"is_paid\" class=\"form-label\">是否付款</label>\n          <input type=\"text\" id=\"is_paid\" class=\"form-control\" v-model=\"TempOrder.data.is_paid\">\n\n        </div>\n        <div class=\"\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"\n            @click.prevent=\"ModalClose\">取消</button>\n          <button type=\"button\" class=\"btn btn-primary\" @click.prevent=\"BtnSubmit\">確定</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport {\n  reactive,\n  ref,\n} from '@vue/reactivity';\nimport {\n  onMounted,\n} from '@vue/runtime-core';\nimport pagenation from '@/components/common/pagination.vue';\n\nexport default {\n  components: {\n    pagenation,\n  },\n  setup() {\n    // 抓取modal的DOM元素\n    const ModalDOM = ref(null);\n    // 存取後台訂單列表的變數\n    const AdminOrderList = reactive({\n      data: [],\n    });\n      // 存取後台頁碼的變數\n    const AdminPagination = reactive({\n      data: {},\n    });\n      // modal的資料暫存\n    const TempOrder = reactive({\n      data: {},\n    });\n\n    // modal開\n    const ModalOpen = (item) => {\n      TempOrder.data = item;\n      ModalDOM.value.classList.add('modal-show');\n    };\n      // modal關\n    const ModalClose = () => {\n      ModalDOM.value.classList.remove('modal-show');\n    };\n      // 取得後台訂單列表的API\n    const AdminGetOrderList = (page = 1) => {\n      axios.get(`${process.env.VUE_APP_ALL_APIPATH}/admin/orders?page=${page}`).then((\n        res,\n      ) => {\n        if (res.data.success) {\n          AdminOrderList.data = res.data.orders;\n          AdminPagination.data = res.data.pagination;\n        } else {\n          alert(res.data.message);\n        }\n      }).catch((err) => {\n        alert(err.message);\n      });\n    };\n      // 更新訂單的API\n    const AdminUpdateProduct = () => {\n      if (TempOrder.data.is_paid === 'true') {\n        TempOrder.data.is_paid = Boolean(1);\n      } else {\n        TempOrder.data.is_paid = Boolean(0);\n      }\n      axios.put(`${process.env.VUE_APP_ALL_APIPATH}/admin/order/${TempOrder.data.id}`,\n        TempOrder).then((\n        res,\n      ) => {\n        if (res.data.success) {\n          alert(res.data.message);\n          AdminGetOrderList();\n          ModalClose();\n        } else {\n          alert(res.data.message);\n        }\n      }).catch((err) => {\n        alert(err.message);\n      });\n    };\n      // 刪除單一訂單的API\n    const AdminDelSingleOrder = (id) => {\n      axios.delete(`${process.env.VUE_APP_ALL_APIPATH}/admin/order/${id}`).then((\n        res,\n      ) => {\n        if (res.data.success) {\n          alert(res.data.message);\n          AdminGetOrderList();\n        } else {\n          alert(res.data.message);\n        }\n      }).catch((err) => {\n        alert(err.message);\n      });\n    };\n      // 刪除全部訂單的API\n    const AdminDelAllOrder = () => {\n      axios.delete(`${process.env.VUE_APP_ALL_APIPATH}/admin/orders/all`).then((\n        res,\n      ) => {\n        if (res.data.success) {\n          alert(res.data.message);\n          AdminGetOrderList();\n        } else {\n          alert(res.data.message);\n        }\n      }).catch((err) => {\n        alert(err.message);\n      });\n    };\n      // modal的確定按鈕\n    const BtnSubmit = () => {\n      AdminUpdateProduct();\n    };\n    onMounted(() => {\n      AdminGetOrderList();\n    });\n\n    return {\n      AdminGetOrderList,\n      AdminDelSingleOrder,\n      AdminDelAllOrder,\n      AdminOrderList,\n      AdminPagination,\n      BtnSubmit,\n\n      TempOrder,\n      ModalDOM,\n\n      ModalOpen,\n      ModalClose,\n    };\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/_dashboard.scss';\n  * {\n    margin: 0;\n    padding: 0;\n    text-decoration: none;\n    list-style: none;\n  }\n\n  .modal-bg {\n    background: rgba(0, 0, 0, 0.8);\n  }\n\n  .modal-close {\n    display: none;\n  }\n\n  .modal-show {\n    display: block;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n\n</style>\n","import { render } from \"./admin-order-list.vue?vue&type=template&id=4afcfe7f&scoped=true\"\nimport script from \"./admin-order-list.vue?vue&type=script&lang=js\"\nexport * from \"./admin-order-list.vue?vue&type=script&lang=js\"\n\nimport \"./admin-order-list.vue?vue&type=style&index=0&id=4afcfe7f&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4afcfe7f\"\n\nexport default script"],"sourceRoot":""}